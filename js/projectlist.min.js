/*
 * GitPHP
 * 
 * @author Christopher Han <xiphux@gmail.com>
 * @copyright Copyright (c) 2012 Christopher Han
 * @package GitPHP
 * @subpackage Javascript
 */
define("modules/resources",["module"],function(b){return b.config().resources});
window.Modernizr=function(b,e){function h(){d.input=function(c){for(var p=0,q=c.length;p<q;p++)i[c[p]]=!!(c[p]in a);if(i.list)i.list=!(!e.createElement("datalist")||!b.HTMLDataListElement);return i}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "))}var d={},g=e.documentElement,c=e.createElement("modernizr"),c=c.style,a=e.createElement("input"),f={},i={},l=[],m=l.slice,j,n={}.hasOwnProperty,o;o=typeof n!=="undefined"&&typeof n.call!=="undefined"?function(b,
a){return n.call(b,a)}:function(b,a){return a in b&&typeof b.constructor.prototype[a]==="undefined"};if(!Function.prototype.bind)Function.prototype.bind=function(b){var a=this;if(typeof a!="function")throw new TypeError;var c=m.call(arguments,1),e=function(){if(this instanceof e){var g=function(){};g.prototype=a.prototype;var g=new g,d=a.apply(g,c.concat(m.call(arguments)));return Object(d)===d?d:g}else return a.apply(b,c.concat(m.call(arguments)))};return e};for(var k in f)o(f,k)&&(j=k.toLowerCase(),
d[j]=f[k](),l.push((d[j]?"":"no-")+j));d.input||h();d.addTest=function(b,a){if(typeof b=="object")for(var c in b)o(b,c)&&d.addTest(c,b[c]);else{b=b.toLowerCase();if(d[b]!==void 0)return d;a=typeof a=="function"?a():a;typeof enableClasses!=="undefined"&&enableClasses&&(g.className+=" "+(a?"":"no-")+b);d[b]=a}return d};c.cssText="";c=a=null;d._version="2.6.2";d.testStyles=function(b,a,c,d){var f,h,k=e.createElement("div"),i=e.body,j=i||e.createElement("body");if(parseInt(c,10))for(;c--;)f=e.createElement("div"),
f.id=d?d[c]:"modernizr"+(c+1),k.appendChild(f);c=['&#173;<style id="smodernizr">',b,"</style>"].join("");k.id="modernizr";(i?k:j).innerHTML+=c;j.appendChild(k);if(!i)j.style.background="",j.style.overflow="hidden",h=g.style.overflow,g.style.overflow="hidden",g.appendChild(j);b=a(k,b);i?k.parentNode.removeChild(k):(j.parentNode.removeChild(j),g.style.overflow=h);return!!b};return d}(this,this.document);define("modernizr",function(){});
define("modules/hassearchreset",["modernizr"],function(){var b=!1;return function(){b||(Modernizr.testStyles("#modernizr, x::-webkit-search-cancel-button { width: 9px; }",function(b){Modernizr.addTest("searchreset",b.offsetWidth==9)}),b=!0);return Modernizr.searchreset}});
define("modules/projectsearch",["jquery","modules/resources","modules/hassearchreset"],function(b,e,h){function d(){a.find("form").keypress(function(b){if(b.which==13)return!1});c.find("tr.projectRow").size()>0&&(h()||a.find("a.clearSearch").click(j),a.find("input.projectSearchBox").keyup(n).bind("input paste",n))}function g(b,a){if(b){f||(f=jQuery(document.createElement("div")),f.addClass("message"),f.appendTo(c));var g=e.NoMatchesFound.replace(/%1/,a);f.text(g);f.show()}else f&&f.hide()}var c=null,
a=null,f=null,i="",l=null,m=null,j=function(){a.find("img searchSpinner").show();a.find("input.projectSearchBox").val("");i="";o("");a.find("img.searchSpinner").hide();return!1},n=function(){var b=a.find("input.projectSearchBox").val().toLowerCase();b!=i&&(a.find("img.searchSpinner").show(),l!=null&&clearTimeout(l),i=b,l=setTimeout(function(){m.search(b);a.find("img.searchSpinner").hide()},500))},o=function(d){clearTimeout(l);l=null;h()||(d.length==0?a.find("a.clearSearch").hide():a.find("a.clearSearch").show());
var e=!1,f=[];c.find("tr.projectRow").each(function(){var a=b(this);if(d.length<1)a.show(),e=!0;else{var c;c=a.find("td.projectName span").text();c.length>0&&c.toLowerCase().indexOf(d)!=-1?c=!0:(c=a.find("td.projectDescription span").text(),c.length>0&&c.toLowerCase().indexOf(d)!=-1?c=!0:(c=a.find("td.projectOwner em").text(),c=c.length>0&&c.toLowerCase().indexOf(d)!=-1?!0:!1));c?(a.show(),e=!0,(a=a.data("category"))&&jQuery.inArray(a,f)==-1&&f.push(a)):a.hide()}});c.find("tr.categoryRow").each(function(){var a=
b(this);if(d.length<1)a.show();else{var c=a.children("th.categoryName").text();c.length>0&&(jQuery.inArray(c,f)!==-1?a.show():a.hide())}});e?(g(!1),c.find("tr.projectHeader").show()):(g(!0,d),c.find("tr.projectHeader").hide())};return{init:function(g,e){c=g;a=e;m=this;var f="";c.find("tr").each(function(){var a=b(this);a.hasClass("categoryRow")?f=a.children("th.categoryName").text():a.hasClass("projectRow")&&f.length>0&&a.data("category",f)});d()},search:o}});
define("modules/getproject",["module"],function(b){return b.config().project||null});define("modules/lang",["jquery"],function(){return function(b){b.find("select").change(function(){b.find("form").submit()});b.find('input[type="submit"]').remove()}});define("modules/snapshotformats",["module"],function(b){return b.config().formats||null});
define("modules/tooltip.snapshot",["jquery","modules/snapshotformats","modules/resources"],function(b,e,h){function d(b){var c="<div>"+h.Snapshot+": ",a=!0,d=b.indexOf("/snapshot")!=-1,i;for(i in e)e.hasOwnProperty(i)&&(a||(c+=" | "),d?(a=b.replace("/snapshot","/"+i),c+='<a href="'+a+'">'+e[i]+"</a>"):c+='<a href="'+b+"&fmt="+i+'">'+e[i]+"</a>",a=!1);c+="</div>";return c}return function(e){e&&e.size()>0&&require(["qtip"],function(){e.each(function(){var c=b(this),a=c.attr("href"),a={content:{text:d(a)},
show:{event:"click"},hide:{fixed:!0,delay:150},style:{classes:"ui-tooltip-gitphp ui-tooltip-light ui-tooltip-shadow"},position:{viewport:b(window)}};c.qtip(a);c.click(function(){return!1})})})}});define("modules/geturl",["module"],function(b){return b.config().baseurl});
define("modules/tooltip.commit",["jquery","modules/geturl","modules/getproject","modules/resources"],function(b,e,h,d){return function(g){g&&g.size()>0&&require(["qtip"],function(){g.each(function(){var c=b(this),a;(a=c.attr("href").match(/h=([0-9a-fA-F]{4,40}|HEAD)/))||(a=c.attr("href").match(/\/commits\/([0-9a-fA-F]{4,40}|HEAD)/));if(a=a?a[1]:null)a={content:{text:'<img src="'+e+'images/tooltip-loader.gif" alt="'+d.Loading+'" />',ajax:{url:e,data:{p:h,a:"commit",o:"jstip",h:a},type:"GET"}},style:{classes:"ui-tooltip-gitphp ui-tooltip-light ui-tooltip-shadow"},
position:{viewport:b(window)}},c.qtip(a)})})}});
define("modules/tooltip.tag",["jquery","modules/geturl","modules/getproject","modules/resources"],function(b,e,h,d){return function(g){g&&g.size()>0&&require(["qtip"],function(){g.each(function(){var c=b(this),a;(a=c.attr("href").match(/t=([^&]+)/))||(a=c.attr("href").match(/\/tags\/([^\/\?]+)/));if(a=a?a[1]:null)a={content:{text:'<img src="'+e+'images/tooltip-loader.gif" alt="'+d.Loading+'" />',ajax:{url:e,data:{p:h,a:"tag",o:"jstip",t:a},type:"GET"}},style:{classes:"ui-tooltip-gitphp ui-tooltip-light ui-tooltip-shadow"},
position:{viewport:b(window)}},c.qtip(a)})})}});
define("modules/loginpopup",["jquery","modules/geturl","modules/resources","qtip"],function(b,e,h){return function(d){b(d).qtip({content:{text:function(){var d=b(document.createElement("div")),c=b(document.createElement("div")).addClass("loginError").addClass("error").css("padding-top","0px"),a=b(document.createElement("div")).addClass("loginForm"),f=b(document.createElement("form"));d.append(a);a.append(f);f.append(c);var a=b(document.createElement("div")).addClass("field"),c=b(document.createElement("label")).attr("for",
"username").text(h.UsernameLabel),i=b(document.createElement("input")).attr("type","text").attr("name","username").attr("id","username");a.append(c);a.append(i);f.append(a);a=b(document.createElement("div")).addClass("field");c=b(document.createElement("label")).attr("for","password").text(h.PasswordLabel);i=b(document.createElement("input")).attr("type","password").attr("name","password").attr("id","password");a.append(c);a.append(i);f.append(a);a=b(document.createElement("div")).addClass("submit");
c=b(document.createElement("input")).attr("type","submit").attr("value",h.Login);a.append(c);f.append(a);f.bind("submit",function(){var a=b("input[name=username]",this).val(),c=b("input[name=password]",this).val(),d=b(".loginError",this);if(!a)return d.text(h.UsernameIsRequired),!1;if(!c)return d.text(h.PasswordIsRequired),!1;d.text("");var f=b("input",this);b.ajax({url:e+"?a=login&o=js",data:{a:"login",o:"js",username:a,password:c},type:"post",dataType:"json",success:function(a){a?a.success===!0?
window.location.reload():a.message?d.text(a.message):d.text(h.AnErrorOccurredWhileLoggingIn):d.text(h.AnErrorOccurredWhileLoggingIn)},error:function(){d.text(h.AnErrorOccurredWhileLoggingIn)},beforeSend:function(){f.attr("disabled","disabled")},complete:function(){f.removeAttr("disabled")}});return!1});return d},title:{text:h.LoginTitle,button:!0}},position:{my:"center",at:"center",target:b(window)},show:{event:"click",modal:{on:!0}},hide:{event:!1},style:{classes:"ui-tooltip-light ui-tooltip-shadow"},
events:{visible:function(){b("input[name=username]",this).focus()}}});b(d).click(function(){return!1})}});
define("common","jquery,module,modules/getproject,modules/lang,modules/tooltip.snapshot,modules/tooltip.commit,modules/tooltip.tag,modules/loginpopup,modernizr".split(","),function(b,e,h,d,g,c,a,f){b(function(){d(b("div.lang_select"));g(b("a.snapshotTip"));h&&(c(b("a.commitTip")),a(b("a.tagTip")));Modernizr.input.autofocus||b("input[autofocus]").filter(":first").focus();f("a.loginLink")});e.config().debug&&require(["modules/debug"])});
define("projectlist",["jquery","modules/projectsearch","common"],function(b,e){b(function(){e.init(b("table.projectList"),b("div.projectSearch"))})});