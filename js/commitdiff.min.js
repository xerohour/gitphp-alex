/*
 * GitPHP
 * 
 * @author Christopher Han <xiphux@gmail.com>
 * @copyright Copyright (c) 2012 Christopher Han
 * @package GitPHP
 * @subpackage Javascript
 */
define("modules/sidebysidecommitdiff",["jquery"],function(a){function e(){var b=g.offset().top;a(document).scrollTop()>b&&a("html, body").animate({scrollTop:b},200)}function f(b){d.find("a.SBSTOCItem").each(function(d,g){b==g?a(this).parent().addClass("activeItem"):a(this).parent().removeClass("activeItem")})}function c(b){g.find("div.diffBlob").each(function(){var d=a(this);d.attr("id")==b?d.slideDown("fast"):d.slideUp("fast")})}var d=null,g=null,b=null,h=null,i=null,j=!1,m=function(){a(document).scrollTop()>
b?j||(d.css("position","fixed"),d.css("top","0px"),j=!0):j&&(d.css("position",h),d.css("top",i),j=!1)},l=function(){var b=a(this);f(b.get(0));c(b.attr("href").substring(1));d.find("a.showAll").show();e();return!1},n=function(){d.find("a.SBSTOCItem").parent().removeClass("activeItem");g.find("div.diffBlob").slideDown("fast");a(this).hide();e();return!1};return{init:function(c,e){d=c;g=e;b=d.position().top;h=d.css("position");i=d.css("top");a(window).scroll(m);d.find("a.SBSTOCItem").click(l);d.find("a.showAll").click(n)}}});
define("modules/getproject",["module"],function(a){return a.config().project||null});define("modules/lang",["jquery"],function(){return function(a){a.find("select").change(function(){a.find("form").submit()});a.find('input[type="submit"]').remove()}});define("modules/snapshotformats",["module"],function(a){return a.config().formats||null});define("modules/resources",["module"],function(a){return a.config().resources});
define("modules/tooltip.snapshot",["jquery","modules/snapshotformats","modules/resources"],function(a,e,f){function c(a){var g="<div>"+f.Snapshot+": ",b=!0,c=a.indexOf("/snapshot")!=-1,i;for(i in e)e.hasOwnProperty(i)&&(b||(g+=" | "),c?(b=a.replace("/snapshot","/"+i),g+='<a href="'+b+'">'+e[i]+"</a>"):g+='<a href="'+a+"&fmt="+i+'">'+e[i]+"</a>",b=!1);g+="</div>";return g}return function(d){d&&d.size()>0&&require(["qtip"],function(){d.each(function(){var d=a(this),b=d.attr("href"),b={content:{text:c(b)},
show:{event:"click"},hide:{fixed:!0,delay:150},style:{classes:"ui-tooltip-gitphp ui-tooltip-light ui-tooltip-shadow"},position:{viewport:a(window)}};d.qtip(b);d.click(function(){return!1})})})}});define("modules/geturl",["module"],function(a){return a.config().baseurl});
define("modules/tooltip.commit",["jquery","modules/geturl","modules/getproject","modules/resources"],function(a,e,f,c){return function(d){d&&d.size()>0&&require(["qtip"],function(){d.each(function(){var d=a(this),b;(b=d.attr("href").match(/h=([0-9a-fA-F]{4,40}|HEAD)/))||(b=d.attr("href").match(/\/commits\/([0-9a-fA-F]{4,40}|HEAD)/));if(b=b?b[1]:null)b={content:{text:'<img src="'+e+'images/tooltip-loader.gif" alt="'+c.Loading+'" />',ajax:{url:e,data:{p:f,a:"commit",o:"jstip",h:b},type:"GET"}},style:{classes:"ui-tooltip-gitphp ui-tooltip-light ui-tooltip-shadow"},
position:{viewport:a(window)}},d.qtip(b)})})}});
define("modules/tooltip.tag",["jquery","modules/geturl","modules/getproject","modules/resources"],function(a,e,f,c){return function(d){d&&d.size()>0&&require(["qtip"],function(){d.each(function(){var d=a(this),b;(b=d.attr("href").match(/t=([^&]+)/))||(b=d.attr("href").match(/\/tags\/([^\/\?]+)/));if(b=b?b[1]:null)b={content:{text:'<img src="'+e+'images/tooltip-loader.gif" alt="'+c.Loading+'" />',ajax:{url:e,data:{p:f,a:"tag",o:"jstip",t:b},type:"GET"}},style:{classes:"ui-tooltip-gitphp ui-tooltip-light ui-tooltip-shadow"},
position:{viewport:a(window)}},d.qtip(b)})})}});
define("modules/loginpopup",["jquery","modules/geturl","modules/resources","qtip"],function(a,e,f){return function(c){a(c).qtip({content:{text:function(){var d=a(document.createElement("div")),c=a(document.createElement("div")).addClass("loginError").addClass("error").css("padding-top","0px"),b=a(document.createElement("div")).addClass("loginForm"),h=a(document.createElement("form"));d.append(b);b.append(h);h.append(c);var b=a(document.createElement("div")).addClass("field"),c=a(document.createElement("label")).attr("for",
"username").text(f.UsernameLabel),i=a(document.createElement("input")).attr("type","text").attr("name","username").attr("id","username");b.append(c);b.append(i);h.append(b);b=a(document.createElement("div")).addClass("field");c=a(document.createElement("label")).attr("for","password").text(f.PasswordLabel);i=a(document.createElement("input")).attr("type","password").attr("name","password").attr("id","password");b.append(c);b.append(i);h.append(b);b=a(document.createElement("div")).addClass("submit");
c=a(document.createElement("input")).attr("type","submit").attr("value",f.Login);b.append(c);h.append(b);h.bind("submit",function(){var b=a("input[name=username]",this).val(),d=a("input[name=password]",this).val(),c=a(".loginError",this);if(!b)return c.text(f.UsernameIsRequired),!1;if(!d)return c.text(f.PasswordIsRequired),!1;c.text("");var g=a("input",this);a.ajax({url:e+"?a=login&o=js",data:{a:"login",o:"js",username:b,password:d},type:"post",dataType:"json",success:function(a){a?a.success===!0?
window.location.reload():a.message?c.text(a.message):c.text(f.AnErrorOccurredWhileLoggingIn):c.text(f.AnErrorOccurredWhileLoggingIn)},error:function(){c.text(f.AnErrorOccurredWhileLoggingIn)},beforeSend:function(){g.attr("disabled","disabled")},complete:function(){g.removeAttr("disabled")}});return!1});return d},title:{text:f.LoginTitle,button:!0}},position:{my:"center",at:"center",target:a(window)},show:{event:"click",modal:{on:!0}},hide:{event:!1},style:{classes:"ui-tooltip-light ui-tooltip-shadow"},
events:{visible:function(){a("input[name=username]",this).focus()}}});a(c).click(function(){return!1})}});
window.Modernizr=function(a,e){function f(){c.input=function(d){for(var c=0,f=d.length;c<f;c++)i[d[c]]=!!(d[c]in b);if(i.list)i.list=!(!e.createElement("datalist")||!a.HTMLDataListElement);return i}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "))}var c={},d=e.documentElement,g=e.createElement("modernizr"),g=g.style,b=e.createElement("input"),h={},i={},j=[],m=j.slice,l,n={}.hasOwnProperty,o;o=typeof n!=="undefined"&&typeof n.call!=="undefined"?function(a,
b){return n.call(a,b)}:function(a,b){return b in a&&typeof a.constructor.prototype[b]==="undefined"};if(!Function.prototype.bind)Function.prototype.bind=function(a){var b=this;if(typeof b!="function")throw new TypeError;var d=m.call(arguments,1),c=function(){if(this instanceof c){var e=function(){};e.prototype=b.prototype;var e=new e,f=b.apply(e,d.concat(m.call(arguments)));return Object(f)===f?f:e}else return b.apply(a,d.concat(m.call(arguments)))};return c};for(var p in h)o(h,p)&&(l=p.toLowerCase(),
c[l]=h[p](),j.push((c[l]?"":"no-")+l));c.input||f();c.addTest=function(a,b){if(typeof a=="object")for(var e in a)o(a,e)&&c.addTest(e,a[e]);else{a=a.toLowerCase();if(c[a]!==void 0)return c;b=typeof b=="function"?b():b;typeof enableClasses!=="undefined"&&enableClasses&&(d.className+=" "+(b?"":"no-")+a);c[a]=b}return c};g.cssText="";g=b=null;c._version="2.6.2";c.testStyles=function(a,b,c,f){var g,i,h=e.createElement("div"),j=e.body,k=j||e.createElement("body");if(parseInt(c,10))for(;c--;)g=e.createElement("div"),
g.id=f?f[c]:"modernizr"+(c+1),h.appendChild(g);c=['&#173;<style id="smodernizr">',a,"</style>"].join("");h.id="modernizr";(j?h:k).innerHTML+=c;k.appendChild(h);if(!j)k.style.background="",k.style.overflow="hidden",i=d.style.overflow,d.style.overflow="hidden",d.appendChild(k);a=b(h,a);j?h.parentNode.removeChild(h):(k.parentNode.removeChild(k),d.style.overflow=i);return!!a};return c}(this,this.document);define("modernizr",function(){});
define("common","jquery,module,modules/getproject,modules/lang,modules/tooltip.snapshot,modules/tooltip.commit,modules/tooltip.tag,modules/loginpopup,modernizr".split(","),function(a,e,f,c,d,g,b,h){a(function(){c(a("div.lang_select"));d(a("a.snapshotTip"));f&&(g(a("a.commitTip")),b(a("a.tagTip")));Modernizr.input.autofocus||a("input[autofocus]").filter(":first").focus();h("a.loginLink")});e.config().debug&&require(["modules/debug"])});
define("commitdiff",["jquery","modules/sidebysidecommitdiff","common"],function(a,e){a(function(){var f=a("div.commitDiffSBS div.SBSTOC"),c=a("div.SBSContent");f.size()>0&&c.size()>0&&e.init(f,c)})});