/*
 * GitPHP
 * 
 * @author Christopher Han <xiphux@gmail.com>
 * @copyright Copyright (c) 2012 Christopher Han
 * @package GitPHP
 * @subpackage Javascript
 */
define("modules/geturl",["module"],function(a){return a.config().baseurl});define("modules/getproject",["module"],function(a){return a.config().project||null});
define("modules/languagedistgraph",["modules/geturl","modules/getproject","d3"],function(a,f){var g=null,d=null,e=null,c=null,b=null,k=null,h=null,j=null,l=null,i=null,n=function(a,c){c=d3.interpolate({startAngle:0,endAngle:0},{startAngle:a.startAngle,endAngle:a.endAngle});return function(a){return b(c(a))}};return{init:function(m){g=d3.layout.pie().value(function(a){return a.value});d=d3.scale.category20();e=d3.select(m).append("svg").attr("width",600).attr("height",600);h=e.append("g").attr("transform",
"translate(300,300)");c=e.append("g").attr("transform","translate(300,300)");j=e.append("g").attr("transform","translate(300,300)");l=j.append("text").attr("dy",-25).attr("font-size","16").attr("text-anchor","middle").style("opacity",0);i=j.append("text").attr("dy",0).attr("text-anchor","middle").attr("font-size","20").text("Loading");j.append("text").attr("dy",20).attr("text-anchor","middle").attr("fill","gray").attr("font-size","12").text("files");h.append("path").attr("fill","#EFEFEF").attr("d",
d3.svg.arc().innerRadius(100).outerRadius(200).startAngle(0).endAngle(6.28318531)());b=d3.svg.arc().innerRadius(100).outerRadius(200);k=d3.svg.arc().innerRadius(100).outerRadius(220);d3.json(a+"?p="+f+"&a=graphdata&g=languagedist",function(a){var a=d3.entries(a),e=0;a.length>0&&a.forEach(function(a){e+=a.value});i.text(e);c.selectAll("path").data(g(a)).enter().append("path").attr("stroke","white").attr("stroke-width",0.5).attr("fill",function(a,b){return d(b)}).transition().duration(750).attrTween("d",
n).each("end",function(){h.remove()});c.selectAll("path").on("mouseover",function(a){d3.select(this).transition().duration(250).attr("d",k);l.transition().style("opacity",1).text(a.data.key);i.text(a.data.value)}).on("mouseout",function(){d3.select(this).transition().duration(250).attr("d",b);l.transition().style("opacity",0);i.text(e)})})}}});define("modules/lang",["jquery"],function(){return function(a){a.find("select").change(function(){a.find("form").submit()});a.find('input[type="submit"]').remove()}});
define("modules/snapshotformats",["module"],function(a){return a.config().formats||null});define("modules/resources",["module"],function(a){return a.config().resources});
define("modules/tooltip.snapshot",["jquery","modules/snapshotformats","modules/resources"],function(a,f,g){function d(a){var c="<div>"+g.Snapshot+": ",b=!0,d=a.indexOf("/snapshot")!=-1,h;for(h in f)f.hasOwnProperty(h)&&(b||(c+=" | "),d?(b=a.replace("/snapshot","/"+h),c+='<a href="'+b+'">'+f[h]+"</a>"):c+='<a href="'+a+"&fmt="+h+'">'+f[h]+"</a>",b=!1);c+="</div>";return c}return function(e){e&&e.size()>0&&require(["qtip"],function(){e.each(function(){var c=a(this),b=c.attr("href"),b={content:{text:d(b)},
show:{event:"click"},hide:{fixed:!0,delay:150},style:{classes:"ui-tooltip-gitphp ui-tooltip-light ui-tooltip-shadow"},position:{viewport:a(window)}};c.qtip(b);c.click(function(){return!1})})})}});
define("modules/tooltip.commit",["jquery","modules/geturl","modules/getproject","modules/resources"],function(a,f,g,d){return function(e){e&&e.size()>0&&require(["qtip"],function(){e.each(function(){var c=a(this),b;(b=c.attr("href").match(/h=([0-9a-fA-F]{4,40}|HEAD)/))||(b=c.attr("href").match(/\/commits\/([0-9a-fA-F]{4,40}|HEAD)/));if(b=b?b[1]:null)b={content:{text:'<img src="'+f+'images/tooltip-loader.gif" alt="'+d.Loading+'" />',ajax:{url:f,data:{p:g,a:"commit",o:"jstip",h:b},type:"GET"}},style:{classes:"ui-tooltip-gitphp ui-tooltip-light ui-tooltip-shadow"},
position:{viewport:a(window)}},c.qtip(b)})})}});
define("modules/tooltip.tag",["jquery","modules/geturl","modules/getproject","modules/resources"],function(a,f,g,d){return function(e){e&&e.size()>0&&require(["qtip"],function(){e.each(function(){var c=a(this),b;(b=c.attr("href").match(/t=([^&]+)/))||(b=c.attr("href").match(/\/tags\/([^\/\?]+)/));if(b=b?b[1]:null)b={content:{text:'<img src="'+f+'images/tooltip-loader.gif" alt="'+d.Loading+'" />',ajax:{url:f,data:{p:g,a:"tag",o:"jstip",t:b},type:"GET"}},style:{classes:"ui-tooltip-gitphp ui-tooltip-light ui-tooltip-shadow"},
position:{viewport:a(window)}},c.qtip(b)})})}});
define("modules/loginpopup",["jquery","modules/geturl","modules/resources","qtip"],function(a,f,g){return function(d){a(d).qtip({content:{text:function(){var e=a(document.createElement("div")),c=a(document.createElement("div")).addClass("loginError").addClass("error").css("padding-top","0px"),b=a(document.createElement("div")).addClass("loginForm"),d=a(document.createElement("form"));e.append(b);b.append(d);d.append(c);var b=a(document.createElement("div")).addClass("field"),c=a(document.createElement("label")).attr("for",
"username").text(g.UsernameLabel),h=a(document.createElement("input")).attr("type","text").attr("name","username").attr("id","username");b.append(c);b.append(h);d.append(b);b=a(document.createElement("div")).addClass("field");c=a(document.createElement("label")).attr("for","password").text(g.PasswordLabel);h=a(document.createElement("input")).attr("type","password").attr("name","password").attr("id","password");b.append(c);b.append(h);d.append(b);b=a(document.createElement("div")).addClass("submit");
c=a(document.createElement("input")).attr("type","submit").attr("value",g.Login);b.append(c);d.append(b);d.bind("submit",function(){var b=a("input[name=username]",this).val(),c=a("input[name=password]",this).val(),d=a(".loginError",this);if(!b)return d.text(g.UsernameIsRequired),!1;if(!c)return d.text(g.PasswordIsRequired),!1;d.text("");var e=a("input",this);a.ajax({url:f+"?a=login&o=js",data:{a:"login",o:"js",username:b,password:c},type:"post",dataType:"json",success:function(a){a?a.success===!0?
window.location.reload():a.message?d.text(a.message):d.text(g.AnErrorOccurredWhileLoggingIn):d.text(g.AnErrorOccurredWhileLoggingIn)},error:function(){d.text(g.AnErrorOccurredWhileLoggingIn)},beforeSend:function(){e.attr("disabled","disabled")},complete:function(){e.removeAttr("disabled")}});return!1});return e},title:{text:g.LoginTitle,button:!0}},position:{my:"center",at:"center",target:a(window)},show:{event:"click",modal:{on:!0}},hide:{event:!1},style:{classes:"ui-tooltip-light ui-tooltip-shadow"},
events:{visible:function(){a("input[name=username]",this).focus()}}});a(d).click(function(){return!1})}});
window.Modernizr=function(a,f){function g(){d.input=function(d){for(var c=0,e=d.length;c<e;c++)h[d[c]]=!!(d[c]in b);if(h.list)h.list=!(!f.createElement("datalist")||!a.HTMLDataListElement);return h}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "))}var d={},e=f.documentElement,c=f.createElement("modernizr"),c=c.style,b=f.createElement("input"),k={},h={},j=[],l=j.slice,i,n={}.hasOwnProperty,m;m=typeof n!=="undefined"&&typeof n.call!=="undefined"?function(a,
b){return n.call(a,b)}:function(a,b){return b in a&&typeof a.constructor.prototype[b]==="undefined"};if(!Function.prototype.bind)Function.prototype.bind=function(a){var b=this;if(typeof b!="function")throw new TypeError;var d=l.call(arguments,1),c=function(){if(this instanceof c){var e=function(){};e.prototype=b.prototype;var e=new e,f=b.apply(e,d.concat(l.call(arguments)));return Object(f)===f?f:e}else return b.apply(a,d.concat(l.call(arguments)))};return c};for(var o in k)m(k,o)&&(i=o.toLowerCase(),
d[i]=k[o](),j.push((d[i]?"":"no-")+i));d.input||g();d.addTest=function(a,b){if(typeof a=="object")for(var c in a)m(a,c)&&d.addTest(c,a[c]);else{a=a.toLowerCase();if(d[a]!==void 0)return d;b=typeof b=="function"?b():b;typeof enableClasses!=="undefined"&&enableClasses&&(e.className+=" "+(b?"":"no-")+a);d[a]=b}return d};c.cssText="";c=b=null;d._version="2.6.2";d.testStyles=function(a,b,c,d){var g,h,i=f.createElement("div"),k=f.body,j=k||f.createElement("body");if(parseInt(c,10))for(;c--;)g=f.createElement("div"),
g.id=d?d[c]:"modernizr"+(c+1),i.appendChild(g);c=['&#173;<style id="smodernizr">',a,"</style>"].join("");i.id="modernizr";(k?i:j).innerHTML+=c;j.appendChild(i);if(!k)j.style.background="",j.style.overflow="hidden",h=e.style.overflow,e.style.overflow="hidden",e.appendChild(j);a=b(i,a);k?i.parentNode.removeChild(i):(j.parentNode.removeChild(j),e.style.overflow=h);return!!a};return d}(this,this.document);define("modernizr",function(){});
define("common","jquery,module,modules/getproject,modules/lang,modules/tooltip.snapshot,modules/tooltip.commit,modules/tooltip.tag,modules/loginpopup,modernizr".split(","),function(a,f,g,d,e,c,b,k){a(function(){d(a("div.lang_select"));e(a("a.snapshotTip"));g&&(c(a("a.commitTip")),b(a("a.tagTip")));Modernizr.input.autofocus||a("input[autofocus]").filter(":first").focus();k("a.loginLink")});f.config().debug&&require(["modules/debug"])});
define("languagedist",["jquery","modules/languagedistgraph","common"],function(a,f){a(function(){f.init("div#graph")})});